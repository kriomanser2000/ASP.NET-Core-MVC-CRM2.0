@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

@model IEnumerable<Customer_Relationship_Management_1._0.Models.User>
<!-- Dynamic-Page For Users -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Nunito" />
    <!-- <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" /> -->
</head>
<style>
* 
{
    font-family: Nunito;
}
body 
{
    font-family: Nunito;
}
.superTable
{
    position: absolute;
    background: #e9e3e3;
    color: black;
    border: 5px solid #e9e3e3;
    border-radius: 4px;
    font-size: 22px;
    left: 310px;
    top: 20px;
}
.tableBtns1 a
{
    color: black;
    background: #D8D8D8;
    border: 5px solid #D8D8D8;
    border-radius: 5px;
    text-decoration: none;
    font-size: 18px;
    cursor: pointer;
    transition: background-color 0.3s, border 0.3s;
    margin-right: 10px; 
}
.tableBtns1 a:hover
{
    background: #B0B0B0;         
    border: 5px solid #B0B0B0;
}
.superTable th, .superTable td 
{
    padding: 10px 20px;
    border: 1px solid #ddd;
    text-align: left;
}
</style>
<body>
    <div class="superTable">
        <table id="userTable">
            <thead>
                <tr>
                    <th>Ім'я</th>
                    <th>Країна</th>
                    <th>Номер телефону</th>
                    <th>Електронна пошта</th>
                    <th>Схвалено</th>
                    <th>Роль</th>
                    <th>Дії</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in Model)
                {
                    <tr>
                        <td>@user.FirstName</td>
                        <td>@user.Country</td>
                        <td>@user.PhoneNumber</td>
                        <td>@user.Email</td>
                        <td>@user.IsApproved</td>
                        <td>@user.Role</td>
                        <td class="tableBtns1">
                            <a href="@Url.Action("Edit", "Users", new { id = user.UserId })">Edit</a> |
                            <a href="@Url.Action("Delete", "Users", new { id = user.UserId })">Delete</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="modal" id="editUserModal">
        <div class="modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h2>Edit User</h2>
            <input id="editFirstNameInput" type="text" placeholder="First Name">
            <input id="editCountryInput" type="text" placeholder="Country">
            <input id="editPhoneInput" type="text" placeholder="Phone">
            <input id="editEmailInput" type="text" placeholder="Email">
            <input id="editIsApprovedInput" type="checkbox">
            <input id="editRoleInput" type="text" placeholder="Role">
            <button id="saveEditBtn" onclick="saveEditedUser()">Save</button>
            <button id="deleteUserBtn" onclick="deleteUser()">Delete</button>
        </div>
    </div>
    <script>
        let editingUserId = null;
        function fillUserTable() 
        {
            //idk
        }
        /*function openEditModal(userId, firstName, country, phone, email, isApproved, role) 
        {
            const modal = document.getElementById('editUserModal');
            modal.style.display = 'block';
            editingUserId = userId;
            document.getElementById('editFirstNameInput').value = firstName;
            document.getElementById('editCountryInput').value = country;
            document.getElementById('editPhoneInput').value = phone;
            document.getElementById('editEmailInput').value = email;
            document.getElementById('editIsApprovedInput').checked = isApproved;
            document.getElementById('editRoleInput').value = role;
        }
        function closeEditModal() 
        {
            const modal = document.getElementById('editUserModal');
            modal.style.display = 'none';
            editingUserId = null;
            document.getElementById('editFirstNameInput').value = '';
            document.getElementById('editCountryInput').value = '';
            document.getElementById('editPhoneInput').value = '';
            document.getElementById('editEmailInput').value = '';
            document.getElementById('editIsApprovedInput').checked = false;
            document.getElementById('editRoleInput').value = '';
        }
        */
        function editUser(userId, firstName, country, phone, email, isApproved, role) 
        {
            window.location.href = `/Users/Edit/${userId}?firstName=${firstName}&country=${country}&phone=${phone}&email=${email}&isApproved=${isApproved}&role=${role}`;
        }
        function saveEditedUser() 
        {
            const firstNameInput = document.getElementById('editFirstNameInput');
            const countryInput = document.getElementById('editCountryInput');
            const phoneInput = document.getElementById('editPhoneInput');
            const emailInput = document.getElementById('editEmailInput');
            const isApprovedInput = document.getElementById('editIsApprovedInput');
            const roleInput = document.getElementById('editRoleInput');
            if (editingUserId !== null) 
            {
                closeEditModal();
            }
        }
        function deleteUser(userId) 
        {
            window.location.href = `/Users/Delete/${userId}`;
        }
        function closeDeleteModal() 
        {
            window.history.back();
        }
    </script>
</body>
</html>